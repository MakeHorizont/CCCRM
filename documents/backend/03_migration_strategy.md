# Стратегия Миграции: "Душитель" (Strangler Fig)

Мы не можем остановить работу предприятия ради переписывания кода. Мы будем заменять моки на реальный API постепенно, модуль за модулем.

## Этап 0: Подготовка (Frontend-side)
1.  Создать `apiConfig` с флагом `USE_REAL_API` (глобально и по-модульно).
2.  Все вызовы в `apiService.ts` должны проходить через прокси-функцию, которая решает, куда идти: в `mockData` или в `fetch()`.

## Этап 1: "Аудит и Пользователи" (Read-only)
Первым делом переносим **User Service** и **Audit Log**.
*   Почему: Это база для авторизации и безопасности.
*   Действие:
    *   Поднять NestJS + PG.
    *   Реализовать `/auth/login` и `/users`.
    *   На фронте: переключить `authService` на реальный API.

## Этап 2: "Склад и Материальные Ценности"
Переносим **Warehouse** и **Household**.
*   Почему: Это "физика" системы. Без неё нет производства.
*   Действие:
    *   Миграция данных из `mockWarehouseItems.ts` в PostgreSQL (написать скрипт-сидер).
    *   Переключение `warehouseService`.

## Этап 3: "Производство и Заказы"
Самый сложный этап.
*   Здесь много бизнес-логики (списание, статусы).
*   Эту логику нужно **вырезать** из Frontend (`apiService.ts`) и **вставить** в Backend (NestJS Services).
*   Фронтенд становится "глупым" — он просто отправляет команду `POST /production/start` и ждет обновленного состояния.

## Этап 4: "Полный отказ от Моков"
1.  Удаление папки `services/mockData`.
2.  Очистка `apiService.ts` от логики симуляции задержек.
3.  Праздничный митинг коллектива.
