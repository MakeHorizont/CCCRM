# Журнал Изменений (Changelog)

## Версия 1.4.0 (31.07.2024)

### Новые Функции
- **Модуль "Ротация Задач":** В рамках борьбы с разделением труда добавлен новый модуль, доступный в разделе "Коллектив". Он позволяет планировать и визуализировать график смены видов деятельности для всех членов коллектива.
  -   **Таймлайн-календарь:** Наглядное отображение ротаций по месяцам, где каждому сотруднику соответствует своя строка.
  -   **Сферы деятельности:** Введены категории ротаций (`Производство`, `Коммуникации`, `Стратегия`, `Администрирование`) с цветовой кодировкой.
  -   **Управление:** Реализовано создание, редактирование и удаление записей о ротации через модальное окно.

### Улучшения и Исправления
- **Kanban:** Исправлен визуальный баг, при котором текст на кнопках выбора досок в редакторе задачи полностью закрашивался. Теперь используется полупрозрачный фон, сохраняющий читаемость.

## Версия 1.3.0 (30.07.2024)

### Новые Функции
- **Расчет Чистой Прибыли:** На странице "Финансовая сводка" реализован полноценный расчет чистой прибыли. Теперь в сводке учитываются доходы, прямые расходы из транзакций и все косвенные расходы (включая расчетные амортизацию и электроэнергию).
- **Корректное Закрытие Месяца:** Исправлена логика закрытия финансового месяца. Расчет прибыли для отчислений в Коллективный Фонд теперь использует полную формулу `Доход - Прямые расходы - Косвенные расходы`.

### Улучшения и Исправления
- **UI "Финансовой сводки":** Сводные виджеты были обновлены для отображения итоговых показателей (Чистая прибыль, Рентабельность), а не только данных по транзакциям.

## Версия 1.2.0 (29.07.2024)

### Новые Функции и Архитектурные Изменения
- **Масштабный рефакторинг UI:** Проведен крупный рефакторинг с целью улучшения пользовательского опыта. Основные рабочие окна для редактирования и просмотра сущностей (Склад, Хранилища, Оборудование, Производство, Стратегические планы) были преобразованы из модальных окон в полноценные страницы с собственными URL. Это делает навигацию более интуитивной и подготавливает приложение к добавлению более сложного функционала.

### Улучшения и Исправления
- **Улучшена структура кода:** В результате рефакторинга были удалены устаревшие компоненты модальных окон, а их логика была инкапсулирована в новых компонентах страниц, что повысило модульность и упростило поддержку.
- **API-сервис:** Обновлены методы получения данных (`getStorageLocations`, `getEquipmentItems`, `getProductionOrders`) для поддержки выборки как активных, так и архивированных записей, что необходимо для корректной работы страниц редактирования.

## Версия 1.1.4 (28.07.2024)

### Новые Функции
- **Финансирование Социальных Инициатив:** Добавлена возможность для руководителя (CEO) финансировать одобренные социальные инициативы напрямую из Коллективного Фонда. При этом автоматически создается транзакция расхода и обновляется статус инициативы.

### Улучшения и Исправления
- **Рефакторинг `CollectiveFund`:** Устранен дублирующийся компонент `CollectiveFundPage.tsx`. Улучшена структура `CollectiveFundRouter.tsx` для предоставления общего контекста для всех вкладок модуля.

## Версия 1.1.3 (27.07.2024)

### Улучшения и Исправления
- **Рефакторинг `ContactsPage`:** Продолжая работу над качеством кода, был реструктурирован модуль "Контакты". Вся логика модального окна и карточки для мобильного вида была вынесена в отдельные компоненты (`ContactModal`, `MobileContactCard`), что значительно уменьшило размер и сложность основного файла `ContactsPage.tsx`.

## Версия 1.1.2 (26.07.2024)

### Улучшения и Исправления
- **Рефакторинг `WarehousePage`:** По аналогии со страницей "Заказы", был проведен значительный рефакторинг компонента "Склад". Громоздкая логика модального окна и карточки мобильного вида была вынесена в отдельные компоненты (`WarehouseItemModal`, `MobileWarehouseItemCard`). Это значительно упростило основной файл страницы, повысило его читаемость и подготовило к дальнейшим доработкам.

## Версия 1.1.1 (25.07.2024)

### Новые Функции
- **Фильтр по оплате в Заказах:** На странице "Заказы" добавлен фильтр, позволяющий отображать все заказы, только оплаченные или только неоплаченные.

### Улучшения и Исправления
- **Рефакторинг `OrdersPage`:** Компонент страницы "Заказы" был разделен на несколько под-компонентов (`MobileOrderCard`, `AssemblyModal`) для уменьшения размера файла и улучшения его структуры. Это повышает читаемость и упрощает дальнейшую поддержку кода.
- **Обновление документации:** План развития и журнал изменений актуализированы.

## Версия 1.1 (24.07.2024)

### Новые Функции

-   **План Развития:** Добавлена папка `documents` для отслеживания планов разработки и истории изменений.
-   **Автосохранение и Восстановление:** Для сложных форм (Задания на производство, Технологические карты, Склад) внедрен механизм автосохранения. Теперь, если закрыть вкладку или перезагрузить страницу, система предложит восстановить несохраненные данные.
-   **Подтверждение Сохранения:** Для повышения безопасности данных добавлено модальное окно с подтверждением перед сохранением изменений в большинстве модулей системы (Заказы, Контакты, Производство, Склад и т.д.).

### Улучшения и Исправления

-   **Модуль "Обсуждения":**
    -   **Исправлено:** Полностью реализован недостающий функционал редактирования тем.
    -   **Добавлено:** В режиме редактирования темы теперь доступны функции архивации и (для архивных тем) окончательного удаления.